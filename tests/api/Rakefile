require 'pry'
require_relative 'lib/scenarios_list'
require_relative 'lib/step_runner'
require_relative 'lib/step_ui'
require 'paint'

class ScenarioUI
  def initialize(output)
    @output = output
  end

  def scenario_started(scenario)
    output.print Paint["- #{scenario.name}", :bold]
    output.print ' '
  end

  private

  attr_reader :output
end

task :default do
  list = ScenariosList.new('./scenarios')
  scenario = list.all.first

  scenario_ui = ScenarioUI.new(STDOUT)
  step_ui = StepUI.new(STDOUT)

  scenario_ui.scenario_started(scenario)
  scenario.steps.each do |step|
    StepRunner.new(step, ui: step_ui).call
  end
end
