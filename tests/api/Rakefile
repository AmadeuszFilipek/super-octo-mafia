require 'pry'
require_relative 'lib/scenarios_list'
require_relative 'lib/step_runner'
require_relative 'lib/scenario_ui'
require_relative 'lib/step_ui'

task :all do
  list = ScenariosList.new('./scenarios')
  step_ui = StepUI.new(STDOUT)
  scenario_ui = ScenarioUI.new(STDOUT, step_ui: step_ui)

  list.scenarios.each do |scenario|
    ScenarioRunner.new(scenario, ui: scenario_ui).call
  end
end

task :default do
  list = ScenariosList.new('./scenarios')
  scenario = list.all.first

  scenario_ui = ScenarioUI.new(STDOUT)
  step_ui = StepUI.new(STDOUT)

  scenario_ui.scenario_started(scenario)
  scenario.steps.each do |step|
    StepRunner.new(step, ui: step_ui).call
  end
end
